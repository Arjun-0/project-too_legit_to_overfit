---
title: "Project proposal"
author: "Too Legit to Overfit"
output: github_document
editor_options: 
  chunk_output_type: console
---

```{r load-packages, message = FALSE}
library(tidyverse)
library(broom)
library(pander)
library(here)
```

```{r load-data, message = FALSE}
board_games <- read_csv(here("data/board_games.csv"))
```

## 1. Introduction

The dataset we are looking at is a collection of board games from Board Game Geeks, which is a crowd-sourced board game review platform. The variables in the dataset are:

We would like to use this dataset to analyse the differences between different categories of board game, in terms of playtime, popularity, and ratings.

## 2. Data

```{r dimensions}
glimpse(board_games)
```


## 3. Data analysis plan

We will try to look for correlations between category and popularity, number of ratings, and playtime. The most common categories are

```{r popular-categories}
board_games_splitcats <- board_games %>% 
  mutate(categories = str_split(category, ","))

popular_categories <- board_games_splitcats %>%
  pull(categories) %>%
  unlist %>%
  as_tibble %>%
  count(value) %>%
  arrange(desc(n)) %>%
  head(6)

popular_categories %>%
  pander

popular_categories <- pull(popular_categories, value)
```

```{r filter-top-cats, eval = FALSE}
list_intersect <- function(a, b) {
  do_intersect = FALSE
  for (value in a) {
    if (value %in% b) {
      do_intersect = TRUE
    }
  }
  do_intersect
}

rows = c()
for (row in 1:nrow(board_games_splitcats)) {
  game_categories <- unlist(board_games_splitcats$categories[row])
  if (list_intersect(game_categories, popular_categories)) {
    rows <- append(rows, board_games_splitcats$game_id[row])
  }
}

board_games_topcats <- board_games_splitcats %>% 
  filter(game_id %in% rows) 
```

```{r filter-top-cats-alt}
board_games_topcats <- board_games_splitcats %>% 
  filter(map_lgl(categories, ~any(popular_categories %in% .x)))

# Note this df has same name as above df because is exactly same df. Should choose preferred method and get rid of other.
```


